<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Opera Warwick</title>
    <link rel="icon" href="./images/opWaLogo.png" />
    <link rel="stylesheet" href="./styles/style.css" />
  </head>

  <body>
    <!-- 
        Template formating for an event on the website.
        Use this every time you mention or describe a new event.     
    -->
    <template id="event-template">
      <li>
        <span class="what" style="font-weight: bold"></span> -
        <span class="when"></span> - <span class="where"></span>
      </li>
    </template>

    <!-- MAIN CONTENT -->
    <h1>University of Warwick Opera Society (aka. OpWa)</h1>
    <h2>Welcome to Opera Warwick</h2>
    <p>
      Hi there, welcome to the University of Warwick opera society webpage! Here
      you'll be able to learn about the society, keep track of our social media
      and see upcoming events.
    </p>
    <h3>Who are we?</h3>
    <p>
      What better means of presenting to you "who we are" than to show us in action...
    </p>
    <iframe
      width="780"
      height="439"
      src="https://www.youtube.com/embed/THntSZDyk7I"
      title="YouTube video player"
      frameborder="0"
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
      allowfullscreen
    ></iframe>
    <h3>What we do?</h3>
    <p>
      At heart we are a place for people with a common love and appreciation for
      OPera and classical music more broadly to share there passions. We are a
      social society. But we also provide a platform for young directeors and
      producers to produce new and exciting forms of Opera.
    </p>

    <h3>What do we stand for? (i.e. society constitution)</h3>
    <h3>Where can you find us?</h3>
    <ul>
      <li>
        <a
          href="https://www.warwicksu.com/societies-sports/societies/operawarwick/"
          >Warwick Student Union website</a
        >
      </li>
      <li><a href="https://www.facebook.com/operawarwick">Facebook</a></li>
      <li>
        <a href="https://www.youtube.com/channel/UCrWmnc1-5iJxZZXjgaX-IgQ"
          >YouTube</a
        >
      </li>
    </ul>

    <h2 id="events">Events (what - when - where)</h2>
    <h3>Regular events</h3>
    <ul id="regular-events"></ul>
    <h3>Spontaneous events</h3>
    <ul id="spontaneous-events"></ul>

    <h2>Young directors</h2>
    <p>Would you like to directe, produce our next performance... Here is the pack... We support young directors who went to grow they're portofolios and push the boundaries of new and exciting opera.</p>


    <h2>OpWa friends ðŸ˜Š</h2>
    <p>
      Opera society members are active participants in the musical community of
      the University of Warwick. You can find members as part of Warcick Chamber
      Choir, Warcick Choir, Brass/Wind orachetsras...
    </p>
    <h2 id="contribute">Contribute</h2>
    <p>
      This is an open-source website produced under the
      <a href="./LICENSE">MIT Licence</a>, any and all contributions are welcome
      and you can contribute by going to the
      <a href="https://github.com/OperaWarwick/OperaWarwick.github.io"
        >Opera Warwick Website Github repository</a
      >
      repository.
    </p>

    <hr />
    <p>
      The current maintainer is <i>Alexandre Shinebourne</i>. If you have any
      issues, queries or suggestions you can get a hold of me at
      <a href="mailto: a.shinebourne@gmail.com">a.shinebourne@gmail.com</a>.
    </p>
    <p>
      Last modified on
      <span id="last-modified" style="font-weight: bold"></span>.
    </p>
  </body>
  <script>
    "use strict";

    const regularEvents = [
      // { what: '<EVENT TITLE>', when: '<EVENT DATE & TIME>', where: '<EVENT LOCATION>' },
      {
        what: "Tutti (casual social singing)",
        when: "every two weeks on Sunday",
        where: "Ensemble room (Music center)",
      },
    ];

    const spontaneousEvents = [
      // { what: '<EVENT TITLE>', when: '<EVENT DATE & TIME>', where: '<EVENT LOCATION>' },
        {
        what: "Welcome week Event (please book here...)",
        when: "Wednesday ",
        where: "Ensemble room",
      },
      {
        what: "Societies fair",
        when: "Welcome week TBD",
        where: "Societies fair",
      },
    ];

    function appendEvents(templateId) {
      const regularEventList = document.getElementById("regular-events");
      const spontaneousEventList =
        document.getElementById("spontaneous-events");
      const fragment = document.getElementById(templateId);

      // Loop over the books and modify the given template
      regularEvents.forEach((event) => {
        // Create an instance of the template content
        const instance = document.importNode(fragment.content, true);
        // Add relevant content to the template
        instance.querySelector(".what").innerHTML = event.what;
        instance.querySelector(".when").innerHTML = event.when;
        instance.querySelector(".where").innerHTML = event.where;
        // Append the instance ot the DOM
        regularEventList.appendChild(instance);
      });

      // Loop over the books and modify the given template
      spontaneousEvents.forEach((event) => {
        // Create an instance of the template content
        const instance = document.importNode(fragment.content, true);
        // Add relevant content to the template
        instance.querySelector(".what").innerHTML = event.what;
        instance.querySelector(".when").innerHTML = event.when;
        instance.querySelector(".where").innerHTML = event.where;
        // Append the instance ot the DOM
        spontaneousEventList.appendChild(instance);
      });
    }

    appendEvents("event-template");

    function setModifiedDate() {
      if (document.getElementById("last-modified")) {
        fetch(
          "https://api.github.com/repos/WarwickFolk/WarwickFolk.github.io/commits"
        )
          .then((response) => {
            return response.json();
          })
          .then((commits) => {
            var modified = commits[0]["commit"]["committer"]["date"].slice(
              0,
              10
            );
            if (modified != "{{ page.date | date: '%Y-%m-%d' }}") {
              document.getElementById("last-modified").textContent = modified;
            }
          });
      }
    }

    setModifiedDate();
  </script>
</html>
